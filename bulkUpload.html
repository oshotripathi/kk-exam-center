<!DOCTYPE html>
<html>
<head>
  <title>Bulk Upload Questions</title>
</head>
<body>

<h2>üî• Bulk Upload Questions</h2>
<button onclick="uploadAll()">Upload All Questions</button>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCGqcunQhA9qXge7_nWZfIMWDQczs5OUBY",
  authDomain: "kk-exam-center.firebaseapp.com",
  projectId: "kk-exam-center",
  storageBucket: "kk-exam-center.firebasestorage.app",
  messagingSenderId: "960789555084",
  appId: "1:960789555084:web:d4ed5391fdd95a9d4ad8a9"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* ‚úÖ SAMPLE STRUCTURE ‚Äì ‡§™‡§π‡§≤‡•á ‡§á‡§∏‡•á test ‡§ï‡§∞‡•ã */
const data = {
  ssc: {
    maths: {

      ratio: {
        hi: [
          {q:"2:3 ‡§ï‡§æ ‡§Ø‡•ã‡§ó 25 ‡§π‡•à, ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ‡§è‡§Å?",o:["10,15","8,12","12,13","9,16"],a:0}
        ],
        en: [
          {q:"Ratio 2:3, sum 25. Numbers?",o:["10,15","8,12","12,13","9,16"],a:0}
        ]
      }

    }
  }
};

/* üî• SAFE UPLOAD FUNCTION */
window.uploadAll = async function () {

  try {

    const maths = data.ssc.maths;

    for (let chapter in maths) {

      const chapterData = maths[chapter];

      for (let lang in chapterData) {

        const questionsArray = chapterData[lang];

        for (let q of questionsArray) {

          await addDoc(collection(db, "questions"), {
            chapter: chapter,
            language: lang,
            question: q.q,
            option1: q.o[0],
            option2: q.o[1],
            option3: q.o[2],
            option4: q.o[3],
            answer: q.a
          });

        }

      }

    }

    alert("üî• Upload Successful üî•");

  } catch (error) {
    console.error("Upload Error:", error);
    alert("Error check console");
  }

};

</script>

</body>
</html>
